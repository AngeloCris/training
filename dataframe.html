<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2022-10-12" />

<title>Dataframes</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="docs/css/swcarpentry-lessons.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Training</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="01_index.html">
    <span class="fas fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-graduation-cap"></span>
     
    Lecturas
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Generalidades</li>
    <li class="dropdown-header">1. Software R project y R-studio</li>
    <li class="dropdown-header">2. Tipos de datos en R: Vectores</li>
    <li class="dropdown-header">3. Tipos de datos en R: Matrices, listas y dataframes</li>
    <li class="dropdown-header">4. Operadores</li>
    <li class="dropdown-header">Análisis de datos</li>
    <li class="dropdown-header">5. Manipulación de datos: Importación</li>
    <li class="dropdown-header">6. Manipulación de datos: Tidy data</li>
    <li class="dropdown-header">7. Manipulación de datos: Transformación</li>
    <li class="dropdown-header">8. Visualización de datos</li>
    <li class="dropdown-header">Documentación</li>
    <li class="dropdown-header">9. Reportes en R</li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="00_setup.html">
    <span class="fas fa-cogs"></span>
     
    Setup
  </a>
</li>
<li>
  <a href="https://github.com/AngeloCris/training">
    <span class="fab fa-github"></span>
     
    Repo
  </a>
</li>
<li>
  <a href="bibliografia.html">
    <span class="fas fa-search"></span>
     
    Bibliografia
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<body>
    <p style="height: 200px;">
        <img src="tnc_logo-removebg-preview.png" alt="Right Logo"
          title="Right Logo" style="height: 150px;  margin-top: 10px; float: right; margin-right: 0.5%;">
    </p>
</body>


<div id="header">



<h1 class="title toc-ignore">Dataframes</h1>
<h4 class="date">2022-10-12</h4>

</div>


<div id="base-de-datos" class="section level2">
<h2>Base de datos</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(penguins)</span></code></pre></div>
<p>En la paquetería <code>palmerpenguins</code>, hay dos conjuntos de
datos. <code>penguins</code> es una versión simplificada de los datos
brutos, elaborado para la enseñanza.</p>
<p>Este conjunto de datos está alojado en la <a
href="https://pallter.marine.rutgers.edu">Estación Antártica Palmer
LTER</a>, miembro de la Red de Investigación Ecológica a Largo Plazo. Si
es de su interés puede obtener más información sobre la investigación y
la metodología de este conjunto de datos en el articulo <a
href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0090081">Ecological
sexual dimorphism and environmental variability within a community of
Antarctic penguins (genus Pygoscelis)</a>.</p>
<p><img src="docs/imagen/pinguinos.PNG" width="582" /></p>
<p>Créditos de la imagen <a
href="https://allisonhorst.github.io/palmerpenguins/">Allison
Horst</a></p>
<p>La base de datos esta almacenado en formato separado por comas
(.csv). Cada fila contiene información de fecha, isla, entre otros. La
información de los atributos se puede encontrar en la ayuda:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>?penguins</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>?penguins_raw</span></code></pre></div>
<p><img src="docs/imagen/pinguino_raw.PNG" width="576" /></p>
<p>Créditos de la imagen <a
href="https://allisonhorst.github.io/palmerpenguins/">Allison
Horst</a></p>
</div>
<div id="importanto-datos-en-r" class="section level2">
<h2>Importanto datos en R</h2>
<p>El archivo debería descargarse en el destino especificado. R aún no
ha cargado los datos del archivo en la memoria. Para ello, podemos
utilizar la función <code>read_csv()</code> del paquete tidyverse.</p>
<p>Los paquetes en R son básicamente conjuntos de funciones adicionales
que te permiten hacer más cosas. Las funciones que hemos estado
utilizando hasta ahora, como <code>round()</code>, <code>sqrt()</code>,
o <code>c()</code> vienen incorporadas en R. Los paquetes le dan acceso
a funciones adicionales a R base. Una función similar a
<code>read_csv()</code> del paquete tidyverse es <code>read.csv()</code>
de R base. No tenemos tiempo para cubrir sus diferencias, pero observe
que la ortografía exacta determina qué función se utiliza. Antes de
utilizar un paquete por primera vez, debe instalarlo en su máquina, y
luego debe importarlo en cada sesión posterior de R cuando lo
necesite.</p>
<p>Para instalar el paquete <code>tidyverse</code>, podemos escribir
<code>install.packages("tidyverse")</code> directamente en la consola.
De hecho, es mejor escribir esto en la consola que en nuestro script
para cualquier paquete, ya que no es necesario reinstalar los paquetes
cada vez que ejecutamos el script. Entonces, para cargar el paquete
escribe:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Ahora podemos utilizar las funciones del paquete
<code>tidyverse</code>. Usemos <code>read_csv()</code> para leer los
datos (aprenderemos más sobre los dataframe más adelante):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">path_to_file</span>(<span class="st">&quot;penguins.csv&quot;</span>))</span></code></pre></div>
<p>Si tiene un archivo en formato <code>csv</code>, puede utilizar
<code>read_csv</code> para crear un objeto con el. La función
<code>path_to_file()</code> nos dirige a la ruta donde se encuentra el
archivo deseado.</p>
<p>Cuando se ejecuta <code>read_csv</code> en un archivo de datos, la
función busca en las primeras 1000 filas de cada columna y adivina su
tipo de datos. Por ejemplo, en este conjunto de datos,
<code>read_csv()</code> lee <code>flipper_length</code>_mm como
<code>int</code> (un tipo de dato numérico), y <code>species</code> como
<code>char</code>. Tiene la opción de especificar el tipo de datos de
una columna manualmente utilizando el argumento <code>col_types</code>
en read_csv.</p>
<p>Podemos ver el contenido de las primeras líneas de datos escribiendo
el nombre del objeto <code>penguins</code>. Por defecto, esto le
mostrará tantas filas y columnas de los datos como quepan en su
pantalla. Si quieres las primeras 50 filas, puedes escribir
<code>print(pingüinos, n = 50)</code>.</p>
<p>También podemos extraer las primeras líneas de estos datos utilizando
la función <code>head()</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 8
##   species island    bill_length_mm bill_depth_mm flipper_length_mm body_…¹ sex    year
##   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
## 1 Adelie  Torgersen           39.1          18.7               181    3750 male   2007
## 2 Adelie  Torgersen           39.5          17.4               186    3800 fema…  2007
## 3 Adelie  Torgersen           40.3          18                 195    3250 fema…  2007
## 4 Adelie  Torgersen           NA            NA                  NA      NA &lt;NA&gt;   2007
## 5 Adelie  Torgersen           36.7          19.3               193    3450 fema…  2007
## 6 Adelie  Torgersen           39.3          20.6               190    3650 male   2007
## # … with abbreviated variable name ¹​body_mass_g</code></pre>
<blockquote>
<p><strong>NOTA</strong>: <code>read_csv</code> asume que los campos
estan delimitados por comas. Sin embargo, en varios países se utiliza la
coma como separador de decimales y el punto y coma (;) como delimitador
de campos. Si desea leer este tipo de archivos en R, puede utilizar la
función <code>read_csv2</code>. Se comporta exactamente igual que
<code>read_csv</code> pero utiliza parámetros diferentes para el decilas
y los separadores de campo. Si se trabaja con otro formato, ambos pueden
ser especificados por el usuario. Consulte la ayuda de
<code>read_csv()</code> escribiendo <code>?read_csv</code> para obtener
más información. También existe la función <code>read_tsv</code> para
archivos de datos separados por tabulaciones, y <code>read_delim</code>
permite especificar más detalles sobre la estructura de su archivo.</p>
</blockquote>
</div>
<div id="que-son-los-dataframe" class="section level2">
<h2>Que son los dataframe</h2>
<p>Un dataframe es la representación de los datos en formato de una
tabla donde las columnas son vectores que tienen todos la misma
longitud. Los dataframe son análogos a las hojas de cálculos de un
documento Excel, con una importante diferencia: Las columnas son
vectores y cada una debe contener un único tipo de dato (por ejemplo,
caracteres, enteros o factores). Por ejemplo, a continuación se muestra
una figura que representa un marco de datos que comprende un vector
numérico, uno de caracteres y uno lógico.</p>
<p><img src="docs/imagen/data_frame.PNG" width="305" /></p>
<p>Se puede inspeccionar la estructura de la base de datos con la
función <code>str()</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(penguins)</span></code></pre></div>
</div>
<div id="inspeccionando-un-dataframe" class="section level2">
<h2>Inspeccionando un dataframe</h2>
<p>Ya vimos cómo las funciones <code>head()</code> y <code>str()</code>
pueden ser útiles para explorar el contenido y la estructura de una base
de datos. A continuación veremos algunas otras funciones útiles para
explorar una base de datos:</p>
<ul>
<li><p>Tamaño:</p>
<ul>
<li><p><code>dim()</code> - muestra las dimensiones del objeto</p></li>
<li><p><code>nrow()</code> - muestra el número de filas</p></li>
<li><p><code>ncol()</code> - muestra el número de columnas</p></li>
</ul></li>
<li><p>Contenido</p>
<ul>
<li><p><code>head()</code> - muestra los primeras 6 filas</p></li>
<li><p><code>tail()</code> - muestra las últimas 6 filas</p></li>
</ul></li>
<li><p>Nombres</p>
<ul>
<li><p><code>names()</code> - muestra los nombres de columnas</p></li>
<li><p><code>rownames()</code> - muestra los nombres de las
filas</p></li>
</ul></li>
<li><p>Resumen</p>
<ul>
<li><p><code>str()</code> - muestra la estructura de un
dataframe</p></li>
<li><p><code>summary()</code> - resume los principales estadísticos de
cada columna</p></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># PREGUNTAS</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Cuál es la clase del objeto penguins?</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cuántas filas y columnas tiene el objeto penguins</span></span></code></pre></div>
</div>
<div id="indexación-y-sub-conjuntos" class="section level2">
<h2>Indexación y sub-conjuntos</h2>
<p>La base de datos de pingüinos tiene filas y columnas (tiene 2
dimensiones). En la práctica, puede que no necesitemos todas las
observaciones; por ejemplo, puede que sólo nos interese un subconjunto
de las observaciones (las filas) o un conjunto concreto de variables
(las columnas). Si queremos extraer algunos datos específicos debemos
especificar las “coordenadas” que queremos. Los números de las filas van
primero, seguidos de los números de las columnas.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraemos valores específicos de filas y columnas</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># La estructura a seguir es la siguiente:</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># data_frame[indice_fila, indice_columna]</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extrae la primera fila y columna de penguins</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>penguins[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Primera fila y octava columna</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>penguins[<span class="dv">1</span>, <span class="dv">8</span>]</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos usar abreviaturas para seleccionar el número de</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># filas o columnas. Por ejemplo, para seleccionar todas las</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># columnas deje el índice en blanco. </span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecciona todas las columnas para la primera fila (obs)</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>penguins[<span class="dv">1</span>,]</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># La misma lógica funciona para las filas</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Para selecionar la primera columna con todas sus </span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># observaciones hacemos lo siguiente:</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>penguins[,<span class="dv">1</span>]</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Para seleccionar múltiples filas o columnas, utilize vectores!</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecciona las primeras 3 filas con la quinta y sexta columna</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>penguins[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>)]</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos usar el operador : para crear vectores</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>penguins[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Como vemos, cuando se trabaja con tibbles se puede extraer un sub-conjunto de datos usando los corchetes simples ([]).</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Sin embargo, el resultado seguirá siendo un formato tibble. Si deseas unicamente el vector, debemos utilizar doble corchete([[]]).</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Por ejemplo, para obtener la 1ra columna del objeto penguins como vector escribimos:</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>penguins[[<span class="dv">1</span>]]</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Para obtener el primer elemento de nuestra base de datos</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>penguins[[<span class="dv">1</span>,<span class="dv">1</span>]]</span></code></pre></div>
<p><code>:</code> es una función especial que crea vectores numéricos
enteros en orden creciente o decreciente (escribe en tu consola 1:10 o
10:1). También se puede excluir ciertos índices de un dataframe
empleando el signo <code>-</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>penguins[, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># Excluye la 1ra fila de la base de datos</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>penguins[<span class="sc">-</span>(<span class="dv">7</span><span class="sc">:</span><span class="fu">nrow</span>(penguins)),] <span class="co"># equivale a la función head()</span></span></code></pre></div>
<p>Los datos pueden ser extraídos ya sea indicando las posiciones (como
vimos anteriormente) o llamandolos directamente por los nombres de sus
columnas.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Usando corchetes como vimos anteriormente</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>penguins[<span class="st">&quot;species&quot;</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>penguins[, <span class="st">&quot;species&quot;</span>]</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Usando doble corchete obtenemos un vector</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>penguins[[<span class="st">&quot;species&quot;</span>]]</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra forma de extraer las columnas de un dataframe es</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co"># empleando el operador $ seguido del nombre de la columna</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>penguins<span class="sc">$</span>species</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejercicios</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Crear un data.frame (penguins_200) que contenga únicamente los elementos de la fila 200 del objeto penguins</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Observa como nrow() te da el número de filas del objeto penguins</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#a) Usa este número para extraer la última fila del objeto penguins</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#b) Cree una nueva base de datos que contenga sólo la última fila del objeto penguins</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Use nrow() para extraer la fila que se encuentra en el centro de la base de datos penguins. </span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Almacene el resultado en un objeto llamado penguins_middle.</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Combina nrow() con el signo - para reproducir los resultados que se obtienen al escribir head(penguins).</span></span></code></pre></div>
</div>
<div id="factores" class="section level2">
<h2>Factores</h2>
<p>Cuando escribimos <code>str(pingüinos)</code> observamos que varias
de las columnas son de la clase <code>integers</code>. Sin embargo, las
columnas <code>specie</code>, <code>island</code> y <code>sex</code> son
de la clase <code>character</code>. Podría decirse que estas columnas
contienen datos categóricos, es decir, que sólo pueden tomar un número
limitado de valores.</p>
<p>R tiene una clase especial para trabajar con datos categóricos,
llamada <code>factor</code>. Los factores son muy útiles y, de hecho,
contribuyen a que R sea especialmente adecuado para trabajar con datos.
Así que vamos a dedicar un poco de tiempo a introducirlos.</p>
<p>Una vez creados, los factores sólo pueden contener un conjunto
predefinido de valores, conocidos como niveles. Los factores se
almacenan como enteros asociados a etiquetas y pueden estar ordenados o
desordenados. Aunque los factores parecen (y a menudo se comportan) como
vectores de caracteres, en realidad son tratados como vectores enteros
por R. Así que hay que tener mucho cuidado al tratarlos como
cadenas.</p>
<p>Al importar una base de datos con <code>read_csv()</code>, las
columnas que contienen texto son reconocidas como
<code>character</code>. Sin embargo, una vez importado los datos podemos
hacer la conversión utilizando la función <code>factor()</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea una variable que tiene dos niveles</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>low_hi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(low_hi)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convirtiendo a factor</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>low_hi <span class="ot">&lt;-</span> <span class="fu">factor</span>(low_hi)</span></code></pre></div>
<p>Podemos corroborar que la conversión ha funcionado utilizando de
nuevo la función <code>summary()</code>. Esto produce una tabla con los
recuentos para cada nivel de factor:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(low_hi)</span></code></pre></div>
<pre><code>## high  low 
##    2    2</code></pre>
<p>R asignará <code>1</code> al nivel <code>"high"</code> y
<code>2</code> al nivel <code>"low"</code> (se ordena en función al
abecedario, h viene antes que l). Puede ver esto usando la función
levels() y puede encontrar el número de niveles usando nlevels():</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(low_hi)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(low_hi)</span></code></pre></div>
<p>A veces, el orden de los factores no importa, otras veces puede
querer especificar el orden porque es significativo (por ejemplo, “low”,
“middle”, “high”), mejora su visualización, o es requerido por un tipo
particular de análisis. En este caso, una forma de reordenar nuestros
niveles:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>low_hi <span class="co"># orden actual</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>low_hi <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>low_hi <span class="co"># despues de re-ordenar</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejercicio</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Cambia las columnas species e island del objeto penguins a factor</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Utilizando las funciones que has aprendido, averiguar ¿Cuántas filas contiene la especies Adelie?</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. ¿Cuántas niveles contiene la variable island?</span></span></code></pre></div>
</div>
<div id="convirtiendo-factores" class="section level2">
<h2>Convirtiendo factores</h2>
<p>Si necesitas convertir un factor en un vector de caracteres, utiliza
<code>as.character(x)</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(low_hi)</span></code></pre></div>
<p>En algunos casos, es posible que tenga que convertir los factores
cuyos niveles aparecen como números (como los niveles de concentración o
los años) en un vector numérico. Por ejemplo, en una parte de su
análisis puede ser necesario codificar los años como factores (por
ejemplo, comparando pesos medios entre años) pero en otra parte de su
análisis puede ser necesario almacenarlos como valores numéricos (por
ejemplo, haciendo operaciones matemáticas con los años). Esta conversión
de factor a numérico es un poco más complicada. La función
<code>as.numeric()</code> devuelve los valores de índice del factor, no
sus niveles, por lo que dará como resultado un conjunto de números
completamente nuevo (y no deseado en este caso). Un método para evitar
esto es convertir los factores en caracteres, y luego en números.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>year_fct <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">1991</span>, <span class="dv">1992</span>, <span class="dv">1993</span>, <span class="dv">1994</span>, <span class="dv">1995</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(year_fct) <span class="co"># Error! y no hay advertencias!</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.character</span>(year_fct)) <span class="co"># funciona</span></span></code></pre></div>
</div>
<div id="renombrando-factores" class="section level2">
<h2>Renombrando factores</h2>
<p>Cuando los datos se almacenan como un factor, puede exporar
rápidamente el número de observaciones que representa cada nivel del
factor. Veamos el número de hombres y mujeres observados:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>penguins<span class="sc">$</span>sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(penguins<span class="sc">$</span>sex)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(penguins<span class="sc">$</span>sex)</span></code></pre></div>
<p><img src="dataframe_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>Sin embargo, como vimos anteriormente al utilizar
<code>summary(penguins$sex)</code>, existen 11 individuos para los que
no se ha registrado la información sobre el sexo. Para mostrarlos en el
gráfico, podemos convertir los valores que faltan (NA) en un nivel de
factor con la función <code>addNA()</code>. También tendremos que dar
una etiqueta al nuevo nivel de factor. Vamos a trabajar con una copia de
la columna de <code>sex</code>, por lo que no vamos a modificar la base
de datos original</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Observamos 11 valores NAs</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Aislamos la variable sexo</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>sex <span class="ot">&lt;-</span> penguins<span class="sc">$</span>sex</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploramos los niveles</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(sex)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos valores NA</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>sex <span class="ot">&lt;-</span> <span class="fu">addNA</span>(sex)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sex)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos una etiqueta los NA</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(sex)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;indeterminado&quot;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(sex)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficamos</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sex)</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejercicio</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Renombra los niveles &quot;female&quot; y &quot;male&quot; de la variable sex por &quot;F&quot; y &quot;M&quot; respectivamente.</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Luego recree el gráfico de barras anterior en el siguiente orden: indeterminado, F, M</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejercicio</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Corrija los siguientes códigos y hagalo funcionar</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>animal_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">animal =</span> <span class="fu">c</span>(dog, <span class="st">&quot;sea cucumber&quot;</span>, <span class="st">&quot;sea urchin&quot;</span>),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">feel =</span> <span class="fu">c</span>(<span class="st">&quot;furry&quot;</span>, <span class="st">&quot;squishy&quot;</span>, <span class="st">&quot;spiny&quot;</span>),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">weight =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">8</span> <span class="fl">1.1</span>, <span class="fl">0.8</span>))</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>country_climate <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;Panama&quot;</span>, <span class="st">&quot;South Africa&quot;</span>, <span class="st">&quot;Australia&quot;</span>),</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">climate =</span> <span class="fu">c</span>(<span class="st">&quot;cold&quot;</span>, <span class="st">&quot;hot&quot;</span>, <span class="st">&quot;temperate&quot;</span>, <span class="st">&quot;hot/temperate&quot;</span>),</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">temperature =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">18</span>, <span class="st">&quot;15&quot;</span>),</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                               <span class="at">northern_hemisphere =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="st">&quot;FALSE&quot;</span>),</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">has_kangaroo =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="dv">1</span>))</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿puede predecir la clase de cada columna del dataframe?</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué tendría que cambiar para asegurar que cada columna tuviera el tipo de datos correcto?</span></span></code></pre></div>
</div>
<div id="formato-fechas" class="section level2">
<h2>Formato Fechas</h2>
<p>Un problema común que tienen los usuarios nuevos (¡y experimentados!)
de R es convertir la información de fecha y hora en una variable que sea
adecuada para los análisis. Una forma de almacenar la información de la
fecha es almacenar cada componente de la fecha en una columna
separada.</p>
<p>Vamos a utilizar la función<code>ymd()</code> del paquete
<code>lubridate</code> (que pertenece al universo tidyverse).
<code>lubridate</code> se instala como parte de la instalación del
<code>tidyverse</code>. Cuando se carga la paquetería
<code>tidyverse</code> <code>(library(tidyverse))</code>, se cargan los
paquetes principales (los paquetes utilizados en la mayoría de los
análisis de datos). <code>lubridate</code>, sin embargo, no pertenece al
núcleo del tidyverse, por lo que hay que cargarlo explícitamente con
<code>library(lubridate)</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>El paquete <code>lubridate</code> tiene muchas funciones útiles para
trabajar con fechas. Éstas pueden ayudarle a extraer fechas en
diferentes formatos, convertir entre zonas horarias, calcular
diferencias horarias y mucho más. Puedes encontrar un resumen de todas
las funciones en el <a
href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/lubridate.pdf">fichero
de lubridate</a>.</p>
<p>Vamos a crear un objeto e inspeccionar su estructura:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="st">&quot;2022-01-02&quot;</span>)</span></code></pre></div>
<pre><code>##  chr &quot;2022-01-02&quot;</code></pre>
<p>Tenga en cuenta que R lee esto como un carácter. Para transformarlo a
formato fecha usaremos la función <code>ymd()</code>, que toma un vector
que representa el año, mes y día y lo convierte en un vector fecha.
<code>Date</code> es una clase de datos reconocida por R como una fecha
y puede ser manipulada como tal. El argumento que requiere la función es
flexible, pero, como mejor práctica, es un vector de caracteres
formateado como “AAAA-MM-DD”.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>my_date <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2022-01-02&quot;</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>my_date <span class="ot">&lt;-</span> <span class="fu">ymd</span>(my_date)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(my_date)</span></code></pre></div>
<pre><code>##  Date[1:1], format: &quot;2022-01-02&quot;</code></pre>
<p>Ahora vamos a extraer la columna <code>Date_egg</code> de la base de
datos <code>penguins_raw</code> e inspeccionaremos su estructura.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>egg_dates <span class="ot">&lt;-</span> penguins_raw<span class="sc">$</span><span class="st">`</span><span class="at">Date Egg</span><span class="st">`</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(egg_dates)</span></code></pre></div>
<pre><code>##  Date[1:344], format: &quot;2007-11-11&quot; &quot;2007-11-11&quot; &quot;2007-11-16&quot; &quot;2007-11-16&quot; &quot;2007-11-16&quot; ...</code></pre>
<p>Podemos extraer el año, el mes y el día de los valores de la
fecha:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>egg_yr <span class="ot">&lt;-</span> <span class="fu">year</span>(egg_dates)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>egg_mo <span class="ot">&lt;-</span> <span class="fu">month</span>(egg_dates)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>egg_day <span class="ot">&lt;-</span> <span class="fu">day</span>(egg_dates)</span></code></pre></div>
<p>Cuando importamos los datos en R, <code>read_csv()</code> reconoció
que esta columna contenía información sobre la fecha. Por esta razón
podemos utilizar las funciones <code>day()</code>, <code>month()</code>
y <code>year()</code> para extraer la información de la fecha, y crear
nuevas columnas en nuestra base de datos.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos crear un dataframe</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>egg_dates_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">year =</span> egg_yr,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">month =</span> egg_mo,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">day =</span> egg_day)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(egg_dates_df)</span></code></pre></div>
<pre><code>##   year month day
## 1 2007    11  11
## 2 2007    11  11
## 3 2007    11  16
## 4 2007    11  16
## 5 2007    11  16
## 6 2007    11  16</code></pre>
<p>Estos vectores pueden ser usados como argumentos para la función
<code>ymd()</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="fu">paste</span>(egg_dates_df<span class="sc">$</span>year, egg_dates_df<span class="sc">$</span>month, egg_dates_df<span class="sc">$</span>day, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>))</span></code></pre></div>
<p>En nuestro ejemplo anterior, la columna <code>Date Egg</code> se leyó
correctamente como una variable <code>Date</code>, pero generalmente no
es así. Las columnas de fecha suelen leerse como variables de carácter y
se puede utilizar la función <code>as_date()</code> para convertirlas al
formato apropiado de <code>Date/POSIXct</code>.</p>
<p>Digamos que tenemos un vector de fechas en formato de caracteres:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>char_dates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;01/15/2020&quot;</span>, <span class="st">&quot;02/05/2020&quot;</span>, <span class="st">&quot;03/17/2020&quot;</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(char_dates)</span></code></pre></div>
<pre><code>##  chr [1:3] &quot;01/15/2020&quot; &quot;02/05/2020&quot; &quot;03/17/2020&quot;</code></pre>
<p>Podemos convertir este vector a fecha:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_date</span>(char_dates, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-15&quot; &quot;2020-02-05&quot; &quot;2020-03-17&quot;</code></pre>
<p>El formato del argumento indica a la función <code>as_date</code> el
orden en que debe analizar los caracteres e identificar el mes, el día y
el año. El formato anterior es el equivalente a mm/dd/aaaa. Un formato
incorrecto puede dar lugar a errores de análisis o a resultados
incorrectos.</p>
<p>Por ejemplo, observe lo que ocurre cuando utilizamos un formato
<code>"%d/%m/%Y"</code>. Dado que no hay meses que sean mayor a 12, el
primer y tercer elemento no pueden ser analizados.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_date</span>(char_dates, <span class="at">format =</span> <span class="st">&quot;%d/%m/%Y&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: 2 failed to parse.</code></pre>
<pre><code>## [1] NA           &quot;2020-05-02&quot; NA</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
